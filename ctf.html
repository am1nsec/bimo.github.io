<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Welcome 2025!</title>
   
</head>

<body>
    <form id="textForm" onsubmit="redirectToText(event)">
        <h1>Enter your name!</h1>
        <label for="inputBox"></label>
        <input type="text" id="inputBox" name="inputBox" placeholder="Type here...">
        <button type="submit">Submit</button>
    </form>

    
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modalText"></h2>
            <button onclick="closeModal()">Close</button>
        </div>
    </div>

  

    <script>
     
        function XSS() {
         
            return decodeURIComponent(window.location.search).includes('<')
                || decodeURIComponent(window.location.search).includes('>')
                || decodeURIComponent(window.location.hash).includes('<')
                || decodeURIComponent(window.location.hash).includes('>');
        }

        function getParameterByName(name) {
            var url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)");
            var results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function redirectToText(event) {
            event.preventDefault();
            const inputBox = document.getElementById('inputBox');
            const text = encodeURIComponent(inputBox.value);
            window.location.href = `/challenge?text=${text}`;
        }

    
        function checkQueryParam() {
            const text = getParameterByName('text');
            if (text && XSS() === false) {
                const modal = document.getElementById('modal');
                const modalText = document.getElementById('modalText');
                modalText.innerHTML = `Welcome, ${text}!`;
                textForm.remove();
                modal.style.display = 'flex';
            }
        }

        function closeModal() {
            location.replace('/challenge');
        }

        window.onload = function() {
            checkQueryParam();
        };
    </script>
</body>
</html
